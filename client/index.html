<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mitos Guaraníes</title>
    <meta
      name="description"
      content="Explora la mitología Guaraní: API con los siete monstruos legendarios, su historia e imágenes."
    />
    <link rel="shortcut icon" href="/assets/gmyths.png" type="image/png" />
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css"
    />
    <script>
      window.va =
        window.va ||
        function () {
          (window.vaq = window.vaq || []).push(arguments);
        };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
  </head>
  <body>
    <header>
      <center>
        <figure>
          <img src="/assets/gmyths.png" alt="Guarani Myths API Logo" />
        </figure>
        <h1>Mitos Guaraníes</h1>
        <p>
          Explora la mitología Guaraní a través de esta API. Accede a los siete
          monstruos legendarios, su historia resumida e imágenes relacionadas.
        </p>
      </center>
    </header>
    <main>
      <blockquote id="element"></blockquote>
      <h3>Para empezar</h3>
      <p>
        La url base contiene información sobre todos los recursos disponibles de
        la API. Todas las peticiones son <code>GET</code> y van sobre
        <code>https</code>. Todas las respuestas devolverán datos en formato
        <code>JSON</code>.
      </p>
      <p>
        Base url:
        <a href="https://warani.vercel.app/api"
          >https://warani.vercel.app/api</a
        >
      </p>
      <h3>Contribuir al proyecto</h3>
      <p>
        Si tienes alguna sugerencia que podría mejorar el proyecto, por favor
        haz un <strong>fork</strong> del
        <a
          href="https://github.com/emrocode/guarani-myths-api"
          target="_blank"
          rel="noopener noreferrer"
          >repositorio</a
        >
        y crea una <strong>pull_request</strong> o puedes simplemente abrir una
        <strong>issue</strong> con la etiqueta «enhancement».
      </p>
      <p>
        <strong>¡Gracias a todos los colaboradores!</strong>
      </p>
      <figure>
        <img
          style="margin-inline: 0"
          src="https://contrib.rocks/image?repo=emrocode/guarani-myths-api&max=500&columns=20"
          alt=""
        />
      </figure>
    </main>
    <footer>
      <p>
        <code>Guaraní Myths API</code> es un proyecto de
        <a
          href="https://github.com/emrocode"
          target="_blank"
          rel="noopener noreferrer"
          >Emilio Romero</a
        >
        y está bajo la licencia MIT.
      </p>
    </footer>
    <script>
      (async function fetchMyths() {
        const containerEl = document.getElementById("element");
        containerEl.innerHTML =
          "<center><mark>Obteniendo historia principal...</mark></center>";

        try {
          const res = await fetch("/api/myths/1?lang=es");

          if (!res.ok)
            throw new Error(
              `Error ${res.status}: No se pudo cargar la historia`,
            );

          const data = await res.json();
          containerEl.innerHTML = "";
          containerEl.innerHTML = `
            <center>
              <img style="aspect-ratio: 1 / 0.5; object-fit: cover; object-position: top;" src=${data.image} />
            </center>
            <h3>${data.title}</h3>
            <p>${data.description}</p>
          `;
        } catch (error) {
          console.error(error);
          containerEl.innerHTML = `<center><mark style="background-color: red !important;">${error.message}</mark></center>`;
        }
      })();
    </script>
  </body>
</html>
